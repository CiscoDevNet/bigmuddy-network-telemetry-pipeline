# How to build?
#
# docker build -f ./Kuberfile -t pipeline:<version> .
#
# Assumes the fully configured configurations will be supplied
# in Kubernetes as a ConfigMap to /data/config
# pipeline is now placed in /data in order to allow the create/delete
# of other files which is otherwise not allowed by platforms such as
# OpenShift where there are security implications.
# ----------------------------------------------------

FROM bitnami/minideb:latest

MAINTAINER Remington Campbell <remcampb@cisco.com>

VOLUME ["/data"]
VOLUME ["/data/config"]

ADD pipeline /pipeline
WORKDIR /data
ENTRYPOINT ["/pipeline"]
CMD ["-log=/data/pipeline.log", "-config=/data/config/pipeline.conf", "-pem=/data/config/pipeline_rsa"]
